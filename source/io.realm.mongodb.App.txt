
.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

io.realm.mongodb.App
^^^^^^^^^^^^^^^^^^^^

.. _io_realm_mongodb_App:

*Superclass:*

- `java.lang.Object <https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html>`__

An *App* is the main client-side entry point for interacting with a *MongoDB Realm App*.The *App* can be used to:

- Register uses and perform various user-related operations through authentication providers (**io.realm.mongodb.auth.ApiKeyAuth (?)**, **EmailPasswordAuthImpl (?)**)
   
   
   
   
- Synchronize data between the local device and a remote Realm App with Synchronized Realms
   
   
- Invoke Realm App functions with **Functions (?)**
   
   
   
   
- Access remote data from MongoDB databases with a **io.realm.mongodb.mongo.MongoClient (?)**
   
   
   
   

To create an app that is linked with a remote *Realm App* initialize Realm and configure the *App* as shown below:



.. code-block:: java

       class MyApplication extends Application {
   
            App APP; // The App instance should be a global singleton
   
            \@Override
            public void onCreate() {
                super.onCreate();
   
                Realm.init(this);
   
                AppConfiguration appConfiguration = new AppConfiguration.Builder(BuildConfig.MONGODB_REALM_APP_ID)
                        .appName(BuildConfig.VERSION_NAME)
                        .appVersion(Integer.toString(BuildConfig.VERSION_CODE))
                        .build();
   
                APP = new App(appConfiguration);
            }
   
        }
    

After configuring the *App* you can start managing users, configure Synchronized Realms, call remote Realm Functions and access remote data through Mongo Collections. The examples below show the synchronized APIs which cannot be used from the main thread. For the equivalent asynchronous counterparts. The example project in please see https://github.com/realm/realm-java/tree/v10/examples/mongoDbRealmExample.

To register a new user and/or login with an existing user do as shown below:



.. code-block:: java

        // Register new user
        APP.getEmailPassword().registerUser(username, password);
   
        // Login with existing user
        User user = APP.login(Credentials.emailPassword(username, password))
    

With an authorized user you can synchronize data between the local device and the remote Realm App by opening a Realm with a **io.realm.mongodb.sync.SyncConfiguration (?)**as indicated below:





.. code-block:: java

        SyncConfiguration syncConfiguration = new SyncConfiguration.Builder(user, "<partition value>")
                 .build();
   
        Realm instance = Realm.getInstance(syncConfiguration);
        SyncSession session = APP.getSync().getSession(syncConfiguration);
   
        instance.executeTransaction(realm -> {
            realm.insert(...);
        });
        session.uploadAllLocalChanges();
        instance.close();
    

You can call remote Realm functions as shown below:



.. code-block:: java

        Functions functions = user.getFunctions();
        Integer sum = functions.callFunction("sum", Arrays.asList(1, 2, 3, 4), Integer.class);
    

And access collections from the remote Realm App as shown here:



.. code-block:: java

        MongoClient client = user.getMongoClient(SERVICE_NAME)
        MongoDatabase database = client.getDatabase(DATABASE_NAME)
        MongoCollection<DocumentT> collection = database.getCollection(COLLECTION_NAME);
        Long count = collection.count().get()
    


Constructors
============

- ``io.realm.mongodb.App````(String)``
- ``io.realm.mongodb.App````(AppConfiguration)``

Nested Class Summary
====================

.. list-table::
   :header-rows: 1
   
   * - Modifier and Type
     - Class and Description
   
   * - public static
     - io.realm.mongodb.App.Result
   
   * - public static interface
     - io.realm.mongodb.App.Callback
   
   
Field Summary
=============

.. list-table::
   :header-rows: 1
   
   * - Modifier and Type
     - Field and Description
   
   * - public static java.util.concurrent.ThreadPoolExecutor
       
       
     - NETWORK_POOL_EXECUTOR
       
       Thread pool used when doing network requests against MongoDB Realm.
        <p>
        This pool is only exposed for testing purposes and replacing it while the queue is not
        empty will result in undefined behaviour.
   
   
Method Summary
==============

.. list-table::
   :header-rows: 1
   
   * - Modifier and Type
     - Method and Description
   
   * - public :ref:`User <io_realm_mongodb_User>`
     - :ref:`currentUser <io_realm_mongodb_App_currentUser____>` ()
       
       Returns the current user that is logged in and still valid.
       
       
       
   
   * - public `Map <https://docs.oracle.com/javase/7/docs/api/java/util/Map.html>`__
     - :ref:`allUsers <io_realm_mongodb_App_allUsers____>` ()
       
       Returns all known users that are either **User.State#LOGGED_IN (?)**or **User.State#LOGGED_OUT (?)**.
       
       
       
       
       
   
   * - public :ref:`User <io_realm_mongodb_User>`
     - :ref:`switchUser <io_realm_mongodb_App_switchUser__User__>` (:ref:`User <io_realm_mongodb_User>` user)
       
       Switch current user.
       
       
       
   
   * - public :ref:`User <io_realm_mongodb_User>`
     - :ref:`removeUser <io_realm_mongodb_App_removeUser__User__>` (:ref:`User <io_realm_mongodb_User>` user)
       
       Removes a users credentials from this device.
       
       
       
   
   * - public :ref:`User <io_realm_mongodb_User>`
     - :ref:`login <io_realm_mongodb_App_login__Credentials__>` (:ref:`Credentials <io_realm_mongodb_Credentials>` credentials)
       
       Logs in as a user with the given credentials associated with an authentication provider.
       
       
       
   
   * - public :ref:`RealmAsyncTask <io_realm_RealmAsyncTask>`
     - :ref:`loginAsync <io_realm_mongodb_App_loginAsync__Credentials__App_Callback_User___>` (:ref:`Credentials <io_realm_mongodb_Credentials>` credentials, :ref:`io.realm.mongodb.App.Callback\<io.realm.mongodb.User> <io_realm_mongodb_App_Callback>` callback)
       
       Logs in as a user with the given credentials associated with an authentication provider.
       
       
       
   
   * - public :ref:`EmailPasswordAuth <io_realm_mongodb_auth_EmailPasswordAuth>`
     - :ref:`getEmailPassword <io_realm_mongodb_App_getEmailPassword____>` ()
       
       Returns a wrapper for interacting with functionality related to users either being created or logged in using the **Credentials.Provider#EMAIL_PASSWORD (?)**identity provider.
       
       
       
       
       
   
   * - public **void (?)**
     - :ref:`addAuthenticationListener <io_realm_mongodb_App_addAuthenticationListener__AuthenticationListener__>` (:ref:`AuthenticationListener <io_realm_mongodb_AuthenticationListener>` listener)
       
       Sets a global authentication listener that will be notified about User events like login and logout.
       
       
       
   
   * - public **void (?)**
     - :ref:`removeAuthenticationListener <io_realm_mongodb_App_removeAuthenticationListener__AuthenticationListener__>` (:ref:`AuthenticationListener <io_realm_mongodb_AuthenticationListener>` listener)
       
       Removes the provided global authentication listener.
       
       
       
   
   * - public :ref:`Sync <io_realm_mongodb_sync_Sync>`
     - :ref:`getSync <io_realm_mongodb_App_getSync____>` ()
       
       Returns the *Sync* instance managing the ongoing *Realm Sync* sessions synchronizing data between the local and the remote *Realm App* associated with this app.
       
       
       
   
   * - public :ref:`Functions <io_realm_mongodb_functions_Functions>`
     - :ref:`getFunctions <io_realm_mongodb_App_getFunctions__User__>` (:ref:`User <io_realm_mongodb_User>` user)
       
       Returns a *Functions* manager for invoking the Realm App's Realm Functions.
       
       
       
   
   * - public :ref:`Functions <io_realm_mongodb_functions_Functions>`
     - :ref:`getFunctions <io_realm_mongodb_App_getFunctions__User__CodecRegistry__>` (:ref:`User <io_realm_mongodb_User>` user, **CodecRegistry (?)** codecRegistry)
       
       Returns a *Functions* manager for invoking the Realm App's Realm Functions with a custom codec registry for encoding and decoding arguments and results.
       
       
       
   
   * - public :ref:`AppConfiguration <io_realm_mongodb_AppConfiguration>`
     - :ref:`getConfiguration <io_realm_mongodb_App_getConfiguration____>` ()
       
       Returns the configuration object for this app.
       
       
       
   
   * - protected **void (?)**
     - :ref:`setNetworkTransport <io_realm_mongodb_App_setNetworkTransport__OsJavaNetworkTransport__>` (**OsJavaNetworkTransport (?)** transport)
       
       Exposed for testing.
       
       
       
   
   * - public **boolean (?)**
     - :ref:`equals <io_realm_mongodb_App_equals__Object__>` (`Object <https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html>`__ o)
       
       Two Apps are considered equal and will share their underlying state if they both refer to the same **AppConfiguration#getAppId() (?)**.
       
       
       
       
       
   
   * - public **int (?)**
     - :ref:`hashCode <io_realm_mongodb_App_hashCode____>` ()
       
       
       
       
       
   
   
Field Detail
============

.. _io_realm_mongodb_App_NETWORK_POOL_EXECUTOR:

NETWORK_POOL_EXECUTOR
---------------------

Thread pool used when doing network requests against MongoDB Realm.This pool is only exposed for testing purposes and replacing it while the queue is not empty will result in undefined behaviour.


Method Detail
=============

.. _io_realm_mongodb_App_currentUser____:

``currentUser``
---------------

public :ref:`User <io_realm_mongodb_User>` currentUser ()

Returns the current user that is logged in and still valid.A user is invalidated when he/she logs out or the user's refresh token expires or is revoked.

If two or more users are logged in, it is the last valid user that is returned by this method.


.. _io_realm_mongodb_App_allUsers____:

``allUsers``
------------

public `Map <https://docs.oracle.com/javase/7/docs/api/java/util/Map.html>`__ allUsers ()

Returns all known users that are either **User.State#LOGGED_IN (?)**or **User.State#LOGGED_OUT (?)**.

Only users that at some point logged into this device will be returned.


.. _io_realm_mongodb_App_switchUser__User__:

``switchUser``
--------------

public :ref:`User <io_realm_mongodb_User>` switchUser (:ref:`User <io_realm_mongodb_User>` user)

Switch current user.The current user is the user returned by **#currentUser() (?)**.




Parameters
~~~~~~~~~~

- ``user - ``the new current user.
   

Throws
~~~~~~

.. _io_realm_mongodb_App_removeUser__User__:

``removeUser``
--------------

public :ref:`User <io_realm_mongodb_User>` removeUser (:ref:`User <io_realm_mongodb_User>` user)

Removes a users credentials from this device. If the user was currently logged in, they will be logged out as part of the process. This is only a local change and does not affect the user state on the server.
Parameters
~~~~~~~~~~

- ``user - ``to remove
   

Throws
~~~~~~

.. _io_realm_mongodb_App_login__Credentials__:

``login``
---------

public :ref:`User <io_realm_mongodb_User>` login (:ref:`Credentials <io_realm_mongodb_Credentials>` credentials)

Logs in as a user with the given credentials associated with an authentication provider.The user who logs in becomes the current user. Other App functionality acts on behalf of the current user.

If there was already a current user, that user is still logged in and can be found in the list returned by **#allUsers() (?)**.



It is also possible to switch between which user is considered the current user by using **#switchUser(User) (?)**.




Parameters
~~~~~~~~~~

- ``credentials - ``the credentials representing the type of login.
   

Throws
~~~~~~

.. _io_realm_mongodb_App_loginAsync__Credentials__App_Callback_User___:

``loginAsync``
--------------

public :ref:`RealmAsyncTask <io_realm_RealmAsyncTask>` loginAsync (:ref:`Credentials <io_realm_mongodb_Credentials>` credentials, :ref:`io.realm.mongodb.App.Callback\<io.realm.mongodb.User> <io_realm_mongodb_App_Callback>` callback)

Logs in as a user with the given credentials associated with an authentication provider.The user who logs in becomes the current user. Other App functionality acts on behalf of the current user.

If there was already a current user, that user is still logged in and can be found in the list returned by **#allUsers() (?)**.



It is also possible to switch between which user is considered the current user by using **#switchUser(User) (?)**.




Parameters
~~~~~~~~~~

- ``credentials - ``the credentials representing the type of login.
   
- ``callback - ``callback when logging in has completed or failed. The callback will always happen on the same thread as this method is called on.
   

Throws
~~~~~~

.. _io_realm_mongodb_App_getEmailPassword____:

``getEmailPassword``
--------------------

public :ref:`EmailPasswordAuth <io_realm_mongodb_auth_EmailPasswordAuth>` getEmailPassword ()

Returns a wrapper for interacting with functionality related to users either being created or logged in using the **Credentials.Provider#EMAIL_PASSWORD (?)**identity provider.


.. _io_realm_mongodb_App_addAuthenticationListener__AuthenticationListener__:

``addAuthenticationListener``
-----------------------------

public **void (?)** addAuthenticationListener (:ref:`AuthenticationListener <io_realm_mongodb_AuthenticationListener>` listener)

Sets a global authentication listener that will be notified about User events like login and logout.Callbacks to authentication listeners will happen on the UI thread.


Parameters
~~~~~~~~~~

- ``listener - ``listener to register.
   

Throws
~~~~~~

.. _io_realm_mongodb_App_removeAuthenticationListener__AuthenticationListener__:

``removeAuthenticationListener``
--------------------------------

public **void (?)** removeAuthenticationListener (:ref:`AuthenticationListener <io_realm_mongodb_AuthenticationListener>` listener)

Removes the provided global authentication listener.
Parameters
~~~~~~~~~~

- ``listener - ``listener to remove.
   

.. _io_realm_mongodb_App_getSync____:

``getSync``
-----------

public :ref:`Sync <io_realm_mongodb_sync_Sync>` getSync ()

Returns the *Sync* instance managing the ongoing *Realm Sync* sessions synchronizing data between the local and the remote *Realm App* associated with this app.
.. _io_realm_mongodb_App_getFunctions__User__:

``getFunctions``
----------------

public :ref:`Functions <io_realm_mongodb_functions_Functions>` getFunctions (:ref:`User <io_realm_mongodb_User>` user)

Returns a *Functions* manager for invoking the Realm App's Realm Functions.This will use the app's default codec registry to encode and decode arguments and results.


See Also
~~~~~~~~

FunctionsAppConfiguration#getDefaultCodecRegistry().. _io_realm_mongodb_App_getFunctions__User__CodecRegistry__:

``getFunctions``
----------------

public :ref:`Functions <io_realm_mongodb_functions_Functions>` getFunctions (:ref:`User <io_realm_mongodb_User>` user, **CodecRegistry (?)** codecRegistry)

Returns a *Functions* manager for invoking the Realm App's Realm Functions with a custom codec registry for encoding and decoding arguments and results.
See Also
~~~~~~~~

Functions.. _io_realm_mongodb_App_getConfiguration____:

``getConfiguration``
--------------------

public :ref:`AppConfiguration <io_realm_mongodb_AppConfiguration>` getConfiguration ()

Returns the configuration object for this app.
.. _io_realm_mongodb_App_setNetworkTransport__OsJavaNetworkTransport__:

``setNetworkTransport``
-----------------------

protected **void (?)** setNetworkTransport (**OsJavaNetworkTransport (?)** transport)

Exposed for testing.Swap the currently configured network transport with the provided one. This should only be done if no network requests are currently running.


.. _io_realm_mongodb_App_equals__Object__:

``equals``
----------

public **boolean (?)** equals (`Object <https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html>`__ o)

Two Apps are considered equal and will share their underlying state if they both refer to the same **AppConfiguration#getAppId() (?)**.


.. _io_realm_mongodb_App_hashCode____:

``hashCode``
------------

public **int (?)** hashCode ()



